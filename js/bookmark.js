function fillForm(a){$("#link-id").val(a.ID),$("#edit-title").val(a.TITLE),$("#edit-link").val(a.LINK),$("#edit-image").val(a.ICON)}function closeForm(a){a.animate({width:"100%",height:"0",overflow:"auto"},450,function(){a.css("opacity",0)})}function openForm(a){a.css("opacity",1),a.animate({height:"90%",padding:"30px","padding-bottom":"0",overflow:"auto"},450)}function loadLinks(){$("#link-container").load("../../apps/fav-links/links.cfm")}function addLink(a,b,c){$.get("../../apps/fav-links/upload.cfc",{method:"addLink",title:$("#add-title").val(),link:$("#add-link").val(),image:$("#add-image").val()},function(a){loadLinks()})}function editLink(a,b,c,d){$.get("../../apps/fav-links/upload.cfc",{method:"editLink",title:$("#edit-title").val(),link:$("#edit-link").val(),image:$("#edit-image").val(),id:$("#link-id").val()},function(a){loadLinks()})}function deleteLink(a){$.post("../../apps/fav-links/upload.cfc",{method:"delete",id:a})}function loadOne(a){$.get("../../apps/fav-links/upload.cfc",{method:"loadOne",id:a,dataType:"json"},function(a){fillForm(JSON.parse(a))})}function validateForm(a){for(var b=0,c=0;c<a.length;c++)""==a[c].value?($(a[c]).parent().siblings(".invalid").text("This field is required"),b=1):a[c].id.includes("image")&&0==validateImage(a[c].value)?($(a[c]).parent().siblings(".invalid").text("This is an invalid image. The file extension must be .jpeg, .jpg or .png"),b=1):$(a[c]).parent().siblings(".invalid").text("");return 0==b}function validateImage(a){return strArr=a.split("."),("png"==strArr[strArr.length-1]||"jpg"==strArr[strArr.length-1]||"jpeg"==strArr[strArr.length-1])&&a}function clearInputFields(a){a.parent().siblings(".modal-body").find("input").val("")}$("#edit-close").click(function(a){a.preventDefault(),closeForm($("#edit-form-container"))}),$("#add-close").click(function(a){a.preventDefault(),closeForm($("#add-form-container"))}),$("#edit-body").on("click",".edit",function(){var a=$(this).parent().siblings(".id")[0].innerHTML;loadOne(a);openForm($("#edit-form-container"))}),$("#btn-add-bookmark").click(function(){openForm($("#add-form-container"))}),$("body").on("click",".delete",function(){$(this).parent().parent().fadeOut();var a=$(this).parent().siblings(".id").text();confirm("Are you sure you want to delete this bookmark?")&&(deleteLink(a),loadLinks())}),$("#edit-modal-close").click(function(){closeForm($("#edit-form-container")),closeForm($("#add-form-container"))}),$("body").on("click","#editLink",function(){$("#manage-bookmarks").modal("toggle"),window.innerWidth>730?$("#edit-body").load("../../apps/fav-links/linksTable.cfm"):$("#edit-body").load("../../apps/fav-links/linksTableMobile.cfm")}),$("body").on("click","#addLink",function(){$("#menu-add").modal("toggle")}),String.prototype.includes||(String.prototype.includes=function(a,b){"use strict";return"number"!=typeof b&&(b=0),!(b+a.length>this.length)&&this.indexOf(a,b)!==-1}),$("#add-submit").click(function(){link=$("#add-link").val(),title=$("#add-title").val(),image=validateImage($("#add-image").val());var a=$("#add-form").find(".form-control");valid=validateForm(a),1==valid&&(addLink(link,title,image),$("#menu-add").modal("hide"),clearInputFields($(this)),closeForm($("#add-form-container")),$("#link-container").load("../../apps/fav-links/linksTable.cfm"),$("#edit-body").load("../../apps/fav-links/linksTable.cfm"))}),$("#Edit-form-sub").click(function(a){a.preventDefault();var b=$("#edit-link-frm").find(".form-control"),c=validateForm(b);1==c&&(editLink($("#edit-link").val(),$("#edit-title").val(),$("#edit-image").val()),$("#menu-edit").modal("hide"),clearInputFields($(this))),closeForm($("#edit-form-container")),$("#edit-body").load("../../apps/fav-links/linksTable.cfm")});